<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="survey_filter_assets" name="Survey filter assets">
        <script
            type="text/javascript"
            src="/survey_filters/static/src/js/survey_filter.js"
        />
    </template>
    <!-- <template
        id="survey_page_statistics_inner"
        inherit_id="survey.survey_page_statistics_inner"
    >
        <xpath expr="//div[@class='card d-print-none']" position="attributes">
            <attribute
                name="class"
            >products_pager form-inline justify-content-center</attribute>
        </xpath>
        <xpath expr="//div[@class='card-header']" position="replace" />
        <xpath expr="//div[@class='card-body']" position="inside">

            <t t-call-assets="survey_filters.survey_filter_assets" lazy_load="True" />
            <div class="container">
                    <div
                    class="form-inline flex-md-nowrap justify-content-between justify-content-md-center"
                >
                        <t
                        t-set="user_filter"
                        t-value="request.env['ir.config_parameter'].sudo().get_param('survey.filter.user')"
                    />
                        <t
                        t-set="date_filter"
                        t-value="request.env['ir.config_parameter'].sudo().get_param('survey.filter.date')"
                    />
                        <t
                        t-set="event_filter"
                        t-value="request.env['ir.config_parameter'].sudo().get_param('survey.filter.event')"
                    />
                        <t
                        t-set="event_text_filter"
                        t-value="request.env['ir.config_parameter'].sudo().get_param('survey.filter.event.contain')"
                    />
                        <t t-if="user_filter">
                            <t t-call="survey_filters.users" />
                        </t>
                        <t t-if="date_filter">
                            <t t-call="survey_filters.date_filter" />
                            <t t-if="date_filter">
                                <t t-call="survey_filters.date_end_filter" />
                            </t>
                        </t>
                        <t t-if="event_filter">
                            <t t-call="survey_filters.events" />
                        </t>
                        <t t-if="event_text_filter and events">
                            <t t-call="survey_filters.event_text" />
                        </t>
                    </div>
            </div>


        </xpath>
    </template> -->

    <template id="users" name="Users Box">
        <div
            id="user_container"
            class="col-sm-4"
            t-att-data-user="current_user if current_user else 0"
            groups="survey.group_survey_manager"
        >

            <select id="select_user" class="select2 w-100" autocomplete="off">
                <option value="">All users</option>
                <t t-foreach="users" t-as="u">
                    <option
                        t-att-value="u.id"
                        t-att-selected="None if not current_user else u.id == current_user.id"
                    ><t t-esc="u.name" /></option>
                </t>
            </select>
        </div>
    </template>

    <template id="event_text" name="Event Text Box">
        <form
            t-att-action="search_url"
            method="get"
            class="col-sm-4 px-0"
            groups="survey.group_survey_manager"
        >
            <t t-call="website.website_search_box" />
        </form>
        <div class="mt-3 h5" t-if="current_search" groups="survey.group_survey_manager">
            <span>Showing results with search: </span>
            <a t-att-href="request.httprequest.path" class="badge badge-secondary">
                <t t-esc="current_search" />
                <span aria-label="Close">&amp;times;</span>
            </a>
        </div>
    </template>

    <template id="events" name="Events Box">
        <div
            id="event_container"
            class="col-sm-4"
            t-att-data-user="current_event if current_event else 0"
            groups="survey.group_survey_manager"
        >

            <select id="select_event" class="select2 w-100" autocomplete="off">
                <option value="">All events</option>
                <t t-foreach="events" t-as="e">
                    <option
                        t-att-value="e.id"
                        t-att-selected="None if not current_event else e.id == current_event.id"
                    ><t t-esc="e.name" /></option>
                </t>
            </select>
        </div>
    </template>

    <template id="date_filter" name="Date filter">
      <div id="date_container" class="col-sm-4">
        <div
                class="input-group date"
                id="datetimepicker-filter-date"
                data-target-input="nearest"
            >
          <input
                    type="text"
                    data-date-format="yyyy/mm/dd"
                    name="filter_date"
                    id="filter-date"
                    class="form-control datetimepicker-input"
                    data-target="#datetimepicker-filter-date"
                />
          <div
                    class="input-group-append"
                    data-date-format="yyyy/mm/dd"
                    data-target="#datetimepicker-filter-date"
                    data-toggle="datetimepicker"
                >
            <div class="input-group-text"><i class="fa fa-calendar" /></div>
          </div>
        </div>
      </div>
    </template>

    <template id="date_end_filter" name="Date end filter">
      <div id="date_container" class="col-sm-4">
        <div
                class="input-group date"
                id="datetimepicker-filter-end-date"
                data-target-input="nearest"
            >
          <input
                    type="text"
                    data-date-format="yyyy/mm/dd"
                    name="filter_end_date"
                    id="filter-end-date"
                    class="form-control datetimepicker-input"
                    data-target="#datetimepicker-filter-end-date"
                />
          <div
                    class="input-group-append"
                    data-date-format="yyyy/mm/dd"
                    data-target="#datetimepicker-filter-end-date"
                    data-toggle="datetimepicker"
                >
            <div class="input-group-text"><i class="fa fa-calendar" /></div>
          </div>
        </div>
      </div>
    </template>
</odoo>
